<template>
    <div if:true={isSpinner} class="spinner-container">
        <div class="loader"></div>
        <div class="wait-text">Processing....</div>
    </div>
    <!-- Start first page -->

    <template if:true={showFirstPage}>

        <div class="body slds-align_absolute-center">
            <br />
            <br />
            <div class="container">
                <lightning-record-edit-form object-api-name="Site_Visit__c">
                    <div class="slds-align_absolute-center plogo">
                        <img style="max-height: 100px" alt="Company logo" src={excellerLogoUrl} />
                    </div>
                    <br />
                    <h1 class="form-title">Site Visit Form</h1>

                    <div class="slds-p-around_medium user-input-box">
                        <br />

                        <label class="required-label">Project Name</label>
                        <lightning-combobox name="Project__c" placeholder="Select Project" options={projectOptions}
                            value={projectId} onchange={handleProjectChange} disabled={disabledProject}
                            variant="label-hidden" style="width: 99%">
                        </lightning-combobox>

                    </div>
                    <div  if:false={isMobileShow} class="slds-p-around_medium user-input-box">
                        <label class="required-label">Mobile</label>
                        <lightning-input variant="label-hidden" class="slds-form-element__label"
                            disabled={disabledMobile} type="tel" placeholder="e.g.1234567890" maxlength="10" required
                            pattern="[0-9]{10}$" value={svWrapper.sv.Mobile__c}
                            message-when-pattern-mismatch="Please Enter Valid Mobile Number" field-name="Mobile__c"
                            name="Mobile__c" onchange={handleChange} style="width: 100%">

                        </lightning-input>
                    </div>
                    <div if:true={isMobileShow} class="slds-p-around_medium user-input-box">
                        <label class="required-label">Mobile</label>
                        <lightning-input variant="label-hidden" class="slds-form-element__label"
                            disabled={disabledMobile} type="tel" placeholder="e.g.1234567890" maxlength="10" required
                            pattern="[0-9]{10}$" value={mobileNumber}
                            message-when-pattern-mismatch="Please Enter Valid Mobile Number" field-name="Mobile__c"
                            name="Mobile__c" onchange={handleChange} style="width: 100%">

                        </lightning-input>
                    </div>
                    <div class="slds-p-around_medium user-input-box">
                        <label>Email</label>
                        <lightning-input class="slds-form-element__label" type="email" variant="label-hidden"
                            disabled={disabledEmail} placeholder="someone@123gmail.com" value={svWrapper.sv.Email__c}
                            field-name="Email__c" name="Email__c" onchange={handleChange} style="width: 100%">
                        </lightning-input>
                    </div>
                </lightning-record-edit-form>
                <template if:false={createNewData}>
                    <div class="slds-align_absolute-center slds-grid slds-grid_vertical"
                        style="margin: 20px !important;">
                        <button type="button" onclick={handleSearch} class="btn slds-align_absolute-center"
                        style="margin: 20px !important; color:white; background-color:#219fde; height:45px; width: 70%; font-size:20px;">Search</button>
                        <!-- <button title="Reset" onclick={handleReset} class="btn slds-align_absolute-center"  style="margin: 20px !important; color:white; background-color:#219fde; height:40px; width: 100%; font-size:20px;">Reset</button> -->
                    </div>
                </template>

                <template if:true={showVerify}>

                    <section if:true={showValidationPopup} aria-describedby="dialog-body-id-4"
                        aria-labelledby="dialog-heading-id-2" class="slds-popover slds-popover_error" role="dialog"
                        style="position:absolute;bottom:0px;left:50%;margin-left:0px;transform:translateX(-50%)">
                        <button
                            class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
                            title="Close dialog">
                            <lightning-icon icon-name="utility:close" alternative-text="CLose" size="xx-small"
                                title="large size" variant="inverse" class="slds-icon slds-icon_x-small"
                                aria-hidden="true" onclick={handleclosepopup}></lightning-icon>

                            <span class="slds-assistive-text">Close dialog</span>
                        </button>
                        <header class="slds-popover__header">
                            <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                                <div class="slds-media__figure">
                                    <span class="slds-icon_container slds-icon-utility-error">
                                        <lightning-icon icon-name="utility:error" alternative-text="Error"
                                            size="xx-small" title="large size" variant="inverse"
                                            class="slds-icon slds-icon_x-small" aria-hidden="true"></lightning-icon>

                                    </span>
                                </div>

                                <div class="slds-media__body" if:true={showValidationPopup}>
                                    <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-2"
                                        title="Resolve error">Mandatory Fields</h2>
                                </div>

                            </div>
                        </header>

                        <div class="slds-popover__body" id="dialog-body-id-4">
                            <p if:true={showValidationPopup}> {showValidation}
                                <!-- <a href="#" title="Learn More">Learn More</a> -->
                            </p>
                        </div>

                        <div class="slds-align_absolute-center slds-grid slds-grid_vertical"
                            style="margin: 20px !important;">
                            <button title="Verify" type="button" onclick={handleVerifyCode}
                                class="btn slds-align_absolute-center"
                                style="margin: 20px !important; color:white; background-color:#219fde; height:45px; width: 70%; font-size:20px;">Verify</button>
                            <!-- <button title="Reset" type="button" onclick={handleReset} class="btn slds-align_absolute-center" style="margin: 20px !important; color:white; background-color:#219fde; height:40px; width: 100%; font-size:20px;">Reset</button> -->
                        </div>
                    </section>
                    <template if:false={createNewData}>
                        <div class="slds-align_absolute-center slds-grid slds-grid_vertical"
                            style="margin: 20px !important;">
                            <button type="button" onclick={handleSearch} cclass="btn slds-align_absolute-center"
                        style="margin: 20px !important; color:white; background-color:#219fde; height:45px; width: 70%; font-size:20px;">Search</button>
                            <!-- <button title="Reset" onclick={handleReset} class="btn slds-align_absolute-center" style="margin: 20px !important; color:white; background-color:#219fde; height:40px; width: 100%; font-size:20px;">Reset</button> -->
                        </div>
                    </template>

                    <!-- Error Popover Section -->
                    <section if:true={showValidationPopup} aria-describedby="dialog-body-id-5"
                        aria-labelledby="dialog-heading-id-3" class="slds-popover slds-popover_error" role="dialog"
                        style="position: absolute; top: 100%; left: 0; margin-top: 8px; z-index: 1; max-width: 300px;">
                        <button
                            class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
                            title="Close dialog" onclick={handleclosepopup}>
                            <lightning-icon icon-name="utility:close" alternative-text="Close" size="xx-small"
                                title="Close" variant="inverse" class="slds-icon slds-icon_x-small"
                                aria-hidden="true"></lightning-icon>
                            <span class="slds-assistive-text">Close dialog</span>
                        </button>
                        <header class="slds-popover__header">
                            <div class="slds-media slds-media_center slds-has-flexi-truncate">
                                <div class="slds-media__figure">
                                    <span class="slds-icon_container slds-icon-utility-error">
                                        <lightning-icon icon-name="utility:error" alternative-text="Error"
                                            size="xx-small" title="Error" variant="inverse"
                                            class="slds-icon slds-icon_x-small" aria-hidden="true"></lightning-icon>
                                    </span>
                                </div>
                                <div class="slds-media__body">
                                    <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-3"
                                        title="Resolve error">Mandatory Fields</h2>
                                </div>
                            </div>
                        </header>
                        <div class="slds-popover__body" id="dialog-body-id-5">
                            <p>{showValidation}</p>
                        </div>
                    </section>
                </template>

                <!-- View Account -->
                <template if:true={showAccountDataFound}>
                    <div class="msg-container">
                        <div class="main">
                            <div style="display: flex; align-items: center;">
                                <lightning-icon icon-name="standard:person_account" size="small"></lightning-icon>
                                <label class="heads" style="color: white; margin-left: 1vh;">Existing Account</label>
                            </div>
                        </div>

                        <!-- <div style="text-align: center; padding: 0;">
                            <lightning-datatable class="slds-table_col-bordered slds-p-vertical_none"
                                columns={accountColumns} data={accountDataFound} key-field="Id" hide-checkbox-column
                                style="width: 100%; box-sizing: border-box;">
                            </lightning-datatable>
                        </div>

                        -->
                        <!-- Edited By Priyanshu Agarkar-->
                        <div class="account-table-container">
                            <table>
                                <tr>
                                    <th class="acchead">Name</th>
                                </tr>
                                <tbody>
                                    <template for:each={accountDataFound} for:item="acc" for:index="index">
                                        <tr key={acc.Id}>

                                            <td class="acc accname">
                                                {acc.Name}</td>
                                        </tr>
                                    </template>
                                </tbody>
                            </table>
                        </div>
                        <!-- Edited By Priyanshu Agarkar-->
                    </div>
                    <br />
                </template>

                <template if:true={showLeadDataFound}>
                    <div class="msg-container">
                        <div class="main">
                            <center>
                                <lightning-icon size="small" icon-name="standard:lead"></lightning-icon>
                                <label class="heads" style="color: white;padding-top:4px;">Lead Details</label>
                            </center>
                        </div>

                        <!-- 
                        <div style="text-align: center; padding: 0;">
                            <lightning-datatable class="slds-table_col-bordered slds-p-vertical_none"
                                columns={leadColumns} data={leadDataFound} key-field="Id" hide-checkbox-column
                                style="width: 100%; box-sizing: border-box;">
                            </lightning-datatable>
                        </div>
                        -->
                        <!-- Edited By Priyanshu Agarkar-->
                        <div class="table-container">
                            <table>
                                <tr>

                                    <th class="lhead">Lead Name</th>
                                    <th class="lhead">Lead Source</th>
                                    <th class="lhead">Presales Manager</th>
                                    <th class="lhead">Last Presales Call Date</th>
                                    <th class="lhead">Lead Creation Date</th>
                                    <th class="lhead">No of Days From Last Call Date</th>
                                </tr>
                                <tbody>
                                    <template for:each={leadDataFound} for:item="ld" for:index="index">

                                        <tr key={ld.Id}>

                                            <td class="ltd ldname">
                                                {ld.Full_Name__c}</td>
                                            <td class="ltd">{ld.Lead_Source__c}</td>
                                            <td class="ltd">{ld.presalesManager}</td>
                                            <td class="ltd">{ld.formattedPresalesCallDate}</td>
                                            <td class="ltd">{ld.formattedCreatedDate}</td>
                                            <td class="ltd">{ld.noOfDaysFromLastCall}</td>
                                        </tr>

                                    </template>
                                </tbody>
                            </table>
                        </div>
                        <!-- Edited By Priyanshu Agarkar-->
                    </div>
                    <br />
                </template>

                <template if:true={showOpportunityDataFound}>
                    <div class="msg-container">
                        <div class="main">
                            <center>
                                <lightning-icon size="small" icon-name="standard:opportunity"></lightning-icon>&nbsp;
                                <label class="head" style="font-size: 15px;color:#ffffff;"> Opportunity Details </label>
                            </center>
                        </div>
                        <!-- 
                        <div style="text-align: center; padding: 0;">
                            <lightning-datatable class="slds-table_col-bordered slds-p-vertical_xxx-small"
                                columns={opportunityColumns} data={opportunityDataFound} key-field="Id"
                                hide-checkbox-column style="width: 100%; box-sizing: border-box;">
                            </lightning-datatable>
                        </div>
                        -->
                        <!-- Edited By Priyanshu Agarkar-->
                        <div class="table-container">
                            <table>
                                <tr>

                                    <th class="opphead">Name</th>
                                    <th class="opphead">Sales Manager</th>
                                    <th class="opphead">Source</th>
                                    <th class="opphead">Last SV Date</th>
                                    <th class="opphead">No of Days from Last Visit</th>
                                </tr>
                                <tbody>
                                    <template for:each={opportunityDataFound} for:item="opp" for:index="index">

                                        <tr key={opp.Id}>

                                            <td class="opp oppname">
                                                {opp.Name}</td>
                                            <td class="opp">{opp.salesManager}</td>
                                            <td class="opp">{opp.Walkin_Source__c}</td>
                                            <td class="opp">{opp.formattedSVCallDate}</td>
                                            <td class="opp">{opp.noOfDaysFromLastSV}</td>

                                        </tr>

                                    </template>
                                </tbody>
                            </table>
                        </div>

                        <!-- Edited By Priyanshu Agarkar-->
                    </div>
                    <br />
                </template>

                <template if:true={nodataFound}>
                    <p style="text-align: center;color:white; font-size: 18px;">No Data Available. </p>
                </template>

                <template if:true={createNewData}>
                    <div class="slds-align_absolute-center slds-grid slds-grid_vertical"
                        style="margin: 20px !important;">
                        <button type="button" class="btn slds-align_absolute-center"
                            style="margin: 20px !important; color:white; background-color:#219fde; height:45px; width: 70%; font-size:20px;" title="Reset"
                                onclick={handleReset}>Reset</button>
                        <button title="Continue" type="button" onclick={handleContinue}
                            class="btn slds-align_absolute-center"
                            style="margin: 20px !important; color:white; background-color:#219fde; height:45px; width: 70%; font-size:20px;">Continue</button>
                    </div>
                </template>

                <section if:true={showValidationPopup} aria-describedby="dialog-body-id-6"
                    aria-labelledby="dialog-heading-id-4" class="slds-popover slds-popover_error" role="dialog"
                    style="position:absolute;bottom:0px;left:50%;margin-left:0px;transform:translateX(-50%)">
                    <button
                        class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
                        title="Close dialog">
                        <lightning-icon icon-name="utility:close" alternative-text="CLose" size="xx-small"
                            title="large size" variant="inverse" class="slds-icon slds-icon_x-small" aria-hidden="true"
                            onclick={handleclosepopup}></lightning-icon>

                        <span class="slds-assistive-text">Close dialog</span>
                    </button>
                    <header class="slds-popover__header">
                        <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                            <div class="slds-media__figure">
                                <span class="slds-icon_container slds-icon-utility-error">
                                    <lightning-icon icon-name="utility:error" alternative-text="Error" size="xx-small"
                                        title="large size" variant="inverse" class="slds-icon slds-icon_x-small"
                                        aria-hidden="true"></lightning-icon>

                                </span>
                            </div>

                            <div class="slds-media__body" if:true={showValidationPopup}>
                                <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-4"
                                    title="Resolve error">Mandatory Fields</h2>
                            </div>

                        </div>
                    </header>

                    <div class="slds-popover__body" id="dialog-body-id-6">
                        <p if:true={showValidationPopup}> {showValidation}
                            <!-- <a href="#" title="Learn More">Learn More</a> -->
                        </p>
                    </div>
                </section>

            </div>
        </div>

    </template>
    <!-- End first page -->

    <!-- show second page -->
    <template if:true={showSecondPage}>
        <div class="body slds-align_absolute-center">
            <div class="container">
                <lightning-record-edit-form object-api-name="Site_Visit__c">
                    <div class="slds-align_absolute-center plogo">
                        <img style="max-height: 100px" alt="Company logo" src={excellerLogoUrl} />
                    </div>
                    <br />
                    <h1 class="form-title">Basic Details</h1>
                    <div class="slds-p-around_medium user-input-box">
                        <br />

                        <label class="required-label">Salutation</label>
                        <lightning-input-field variant="label-hidden" required field-name="Salutation__c"
                            name="Salutation__c" value={svWrapper.sv.Salutation__c} onchange={handleChange}
                            style="width:99%;">
                        </lightning-input-field>

                    </div>

                    <div class="slds-p-around_medium user-input-box">
                        <label class="required-label">First Name</label>
                        <lightning-input variant="label-hidden" type="text" required field-name="First_Name__c"
                            name="First_Name__c" value={svWrapper.sv.First_Name__c} onchange={handleChange}
                            style="width:99%;">
                        </lightning-input>
                    </div>

                    <div class="slds-p-around_medium user-input-box">
                        <label class="required-label">Last Name</label>
                        <lightning-input type="text" variant="label-hidden" required field-name="Last_Name__c"
                            name="Last_Name__c" value={svWrapper.sv.Last_Name__c} onchange={handleChange}
                            style="width:99%;">
                        </lightning-input>
                    </div>

                    <div if:false={isMobileShow} class="slds-p-around_medium user-input-box">
                        <label class="required-label">Mobile</label>
                        <lightning-input variant="label-hidden" class="slds-form-element__label"
                            disabled={disabledMobile} type="tel" maxlength="10" required pattern="[0-9]{10}$"
                            message-when-pattern-mismatch="Please Enter Valid Mobile Number"
                            value={svWrapper.sv.Mobile__c} field-name="Mobile__c" name="Mobile__c"
                            onchange={handleChange} style="width:100%;">
                        </lightning-input>
                    </div>
                    <div if:true={isMobileShow} class="slds-p-around_medium user-input-box">
                        <label class="required-label">Mobile</label>
                        <lightning-input variant="label-hidden" class="slds-form-element__label"
                            disabled={disabledMobile} type="tel" placeholder="e.g.1234567890" maxlength="10" required
                            pattern="[0-9]{10}$" value={mobileNumber}
                            message-when-pattern-mismatch="Please Enter Valid Mobile Number" field-name="Mobile__c"
                            name="Mobile__c" onchange={handleChange} style="width: 100%">
                        </lightning-input>
                    </div>
                    <div class="slds-p-around_medium user-input-box">
                        <label>Email</label>
                        <lightning-input class="slds-form-element__label" type="email" value={svWrapper.sv.Email__c}
                            variant="label-hidden" disabled={disabledEmail} field-name="Email__c" name="Email__c"
                            onchange={handleChange} style="width:100%;">
                        </lightning-input>
                    </div>

                    <div class="button-container" style="margin: 20px !important;">
                        <button title="Previous" type="button" onclick={handleSecondPagePrevious} class="btn-2"
                            style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px; margin-right: 10px;">
                            Previous
                        </button>
                        <button title="Next" type="button" onclick={handleSecondPage} class="btn-2"
                            style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px;">
                            Next
                        </button>
                    </div>


                    <section if:true={showValidationPopup} aria-describedby="dialog-body-id-7"
                        aria-labelledby="dialog-heading-id-5" class="slds-popover slds-popover_error" role="dialog"
                        style="position:absolute;bottom:0px;left:50%;margin-left:0px;transform:translateX(-50%)">
                        <button
                            class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
                            title="Close dialog">
                            <lightning-icon icon-name="utility:close" alternative-text="CLose" size="xx-small"
                                title="large size" variant="inverse" class="slds-icon slds-icon_x-small"
                                aria-hidden="true" onclick={handleclosepopup}></lightning-icon>

                            <span class="slds-assistive-text">Close dialog</span>
                        </button>
                        <header class="slds-popover__header">
                            <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                                <div class="slds-media__figure">
                                    <span class="slds-icon_container slds-icon-utility-error">
                                        <lightning-icon icon-name="utility:error" alternative-text="Error"
                                            size="xx-small" title="large size" variant="inverse"
                                            class="slds-icon slds-icon_x-small" aria-hidden="true"></lightning-icon>

                                    </span>
                                </div>

                                <div class="slds-media__body" if:true={showValidationPopup}>
                                    <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-5"
                                        title="Resolve error">Mandatory Fields</h2>
                                </div>

                            </div>
                        </header>

                        <div class="slds-popover__body" id="dialog-body-id-7">
                            <p if:true={showValidationPopup}> {showValidation}
                                <!-- <a href="#" title="Learn More">Learn More</a> -->
                            </p>
                        </div>
                    </section>
                </lightning-record-edit-form>
            </div>
        </div>
    </template>
    <!-- end second page -->

    <!-- third page start  -->
    <template if:true={showthirdPage}>
        <div class="body slds-align_absolute-center">
            <div class="container">
                <lightning-record-edit-form object-api-name="Account">
                    <div class="slds-p-around_medium user-input-box">
                        <br />
                        <div class="slds-align_absolute-center plogo">
                            <img style="max-height: 100px" alt="Company logo" src={excellerLogoUrl} />
                        </div>
                    </div>
                    <br />

                    <template if:true={showResidentSection}>
                        <h1 class="form-title">Resident Address Details Section</h1>
                        <br />
                        <div class="slds-p-around_medium user-input-box">
                            <!-- <label class="required">Search Location</label> -->
                            <lightning-input label="Search Location" name="Residential" autocomplete="off"
                                placeholder="Search Resident Address" value={inputValueResident} variant="label-hidden"
                                onchange={fetchPlaceSuggestions}>
                            </lightning-input>
                            <template if:true={showResidentLocation}>
                                <template if:true={suggestions.length}>
                                    <ul class="search-ul" style="border:0.5px solid black;">
                                        <template for:each={suggestions} for:item="suggestion">

                                            <li style="padding:8px;" key={suggestion.placeId}
                                                data-place-id={suggestion.placeId} data-name={suggestion.description}
                                                onclick={handleSuggestionSelect}>
                                                <lightning-icon icon-name="utility:checkin" alternative-text="checkin"
                                                    size="xx-small" variant="brand" aria-hidden="true"></lightning-icon>
                                                &nbsp;
                                                {suggestion.description}
                                            </li>
                                        </template>
                                    </ul>
                                </template>
                            </template>

                            <!-- Flat-No Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label class="required-label">Flat / House No. </label>
                                <lightning-input-field field-name="Flat_No__c" variant="label-hidden"
                                    onchange={handleChange} value={svWrapper.sv.Flat_No__c}
                                    style="font-size:15px; width:100%;">
                                </lightning-input-field>
                            </div>

                            <!-- Street Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label class="required-label">Street</label>
                                <lightning-input type="text" field-name="Locality__c"  name="Street" variant="label-hidden"
                                    value={svWrapper.sv.Locality__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>

                            <!-- City Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label class="required-label">City</label>
                                <lightning-input type="text"  field-name="City__c" name="City" variant="label-hidden"
                                    value={svWrapper.sv.City__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>

                            <!-- Country Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label class="required-label">Country</label>
                                <lightning-input type="text"  field-name="Country__c" name="Country" variant="label-hidden"
                                    value={svWrapper.sv.Country__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>

                            <!-- State/Province Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label class="required-label">State/ Province</label>
                                <lightning-input type="text" field-name="State__c" name="State" variant="label-hidden"
                                    value={svWrapper.sv.State__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>

                            <!-- Zip/Postal Code Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label class="required-label">Zip/ Postal Code</label>
                                <lightning-input type="text"  field-name="Pincode__c" name="PostalCode" variant="label-hidden"
                                    value={svWrapper.sv.Pincode__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>
                        </div>
                    </template>
                    <!-- Office Address Section -->
                    <template if:true={showOfficeSection}>
                        <h1 class="form-title">Office Address Details Section</h1>
                        <br />
                        <div class="slds-p-around_medium user-input-box">
                            <!-- <label class="required">Search Location</label> -->
                            <lightning-input label="Search Location" name="Office" placeholder="Search Office Address"
                                autocomplete="off" value={inputValue} variant="label-hidden"
                                onchange={fetchPlaceSuggestions}>
                            </lightning-input>

                            <template if:true={showOfficeLocation}>
                                <template if:true={suggestions.length}>
                                    <ul class="search-ul" style="border:0.5px solid black;">
                                        <template for:each={suggestions} for:item="suggestion">

                                            <li style="padding:8px;" key={suggestion.placeId}
                                                data-place-id={suggestion.placeId} data-name={suggestion.description}
                                                onclick={handleSuggestionSelect}>
                                                <lightning-icon icon-name="utility:checkin" alternative-text="checkin"
                                                    size="xx-small" variant="brand" aria-hidden="true"></lightning-icon>
                                                &nbsp;
                                                {suggestion.description}
                                            </li>
                                        </template>
                                    </ul>
                                </template>
                            </template>

                            <!-- Street Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label>Street</label>
                                <lightning-input type="text" name="Street" variant="label-hidden"
                                    value={svWrapper.sv.Locality_1__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>

                            <!-- City Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label>City</label>
                                <lightning-input type="text" name="City" variant="label-hidden"
                                    value={svWrapper.sv.City_1__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>

                            <!-- Country Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label>Country</label>
                                <lightning-input type="text" name="Country" variant="label-hidden"
                                    value={svWrapper.sv.Country_1__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>

                            <!-- State/Province Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label>State/ Province</label>
                                <lightning-input type="text" name="State" variant="label-hidden"
                                    value={svWrapper.sv.State_1__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>

                            <!-- Zip/Postal Code Input -->
                            <div class="slds-p-around_medium user-input-box">
                                <label>Zip/ Postal Code</label>
                                <lightning-input type="text" name="PostalCode" variant="label-hidden"
                                    value={svWrapper.sv.Pincode_1__c} onchange={handleChange}
                                    style="font-size:15px; width:100%;">
                                </lightning-input>
                            </div>
                        </div>
                    </template>


                    <div class="button-container" style="margin: 20px !important;">
                        <template if:true={showOfficeSection}>
                            <button title="Previous" type="button" onclick={handlePrevious} class="btn-2"
                                style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px; margin-right: 10px;">
                                Previous
                            </button>
                            <button title="Next" type="button" onclick={handleThirdPage} class="btn-2"
                                style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px;">
                                Next
                            </button>
                        </template>
                        <template if:true={showResidentSection}>
                            <button title="Previous" type="button" onclick={handlethirdPagePrevious} class="btn-2"
                                style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px; margin-right: 10px;">
                                Previous
                            </button>
                            <button title="Next" type="button" onclick={handleNext} class="btn-2"
                                style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px;">
                                Next
                            </button>
                        </template>
                    </div>

                    <section if:true={showValidationPopup} aria-describedby="dialog-body-id-8"
                        aria-labelledby="dialog-heading-id-6" class="slds-popover slds-popover_error" role="dialog"
                        style="position:absolute;bottom:0px;left:50%;margin-left:0px;transform:translateX(-50%)">
                        <button
                            class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
                            title="Close dialog">
                            <lightning-icon icon-name="utility:close" alternative-text="CLose" size="xx-small"
                                title="large size" variant="inverse" class="slds-icon slds-icon_x-small"
                                aria-hidden="true" onclick={handleclosepopup}></lightning-icon>

                            <span class="slds-assistive-text">Close dialog</span>
                        </button>
                        <header class="slds-popover__header">
                            <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                                <div class="slds-media__figure">
                                    <span class="slds-icon_container slds-icon-utility-error">
                                        <lightning-icon icon-name="utility:error" alternative-text="Error"
                                            size="xx-small" title="large size" variant="inverse"
                                            class="slds-icon slds-icon_x-small" aria-hidden="true"></lightning-icon>

                                    </span>
                                </div>

                                <div class="slds-media__body" if:true={showValidationPopup}>
                                    <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-6"
                                        title="Resolve error">Mandatory Fields</h2>
                                </div>

                            </div>
                        </header>

                        <div class="slds-popover__body" id="dialog-body-id-8">
                            <p if:true={showValidationPopup}> {showValidation}
                                <!-- <a href="#" title="Learn More">Learn More</a> -->
                            </p>
                        </div>
                    </section>

                </lightning-record-edit-form>
            </div>
        </div>
    </template>
    <!-- end third page -->
    <!-- show fourth page -->
    <template if:true={showFourthPage}>
        <div class="body slds-align_absolute-center">
            <div class="container">
                <lightning-record-edit-form object-api-name="Site_Visit__c">
                    <div class="slds-align_absolute-center plogo">
                        <img style="max-height: 100px" alt="Company logo" src={excellerLogoUrl} />
                    </div>
                    <br />
                    <h1 class="form-title">Source Details</h1>
                    <template if:true={showLeadDataFound}>
                        <template if:false={showOpportunityDataFound}>
                            <div style="display: flex;">
                                <div class="slds-p-around_medium user-input-box">
                                    <br />

                                    <label class="required-label">Walkin Source</label>
                                    <lightning-input-field name="Walk_In_Source__c" field-name="Walk_In_Source__c"
                                        variant="label-hidden" class="slds-form-element__label"
                                        disabled={isSourceNotEditable} value={svWrapper.sv.Walk_In_Source__c}
                                        onchange={handleChange} style="width:100%;">
                                    </lightning-input-field>

                                    <label class="required-label">Walkin Sub-Source</label>
                                    <lightning-input-field name="Walk_In_Sub_Source__c"
                                        field-name="Walk_In_Sub_Source__c" variant="label-hidden"
                                        class="slds-form-element__label" disabled={isSourceNotEditable}
                                        value={svWrapper.sv.Walk_In_Sub_Source__c} onchange={handleChange}
                                        style="width:100%;">
                                    </lightning-input-field>
                                </div>
                            </div>
                        </template>
                    </template>

                    <template if:false={showLeadDataFound}>
                        <template if:true={showOpportunityDataFound}>
                            <div style="display: flex;">
                                <div class="slds-p-around_medium user-input-box">
                                    <br />

                                    <label class="required-label">Walkin Source</label>
                                    <lightning-input-field name="Walk_In_Source__c" field-name="Walk_In_Source__c"
                                        variant="label-hidden" class="slds-form-element__label"
                                        disabled={isSourceNotEditable} value={svWrapper.sv.Walk_In_Source__c}
                                        onchange={handleChange} style="width:100%;">
                                    </lightning-input-field>

                                    <label class="required-label">Walkin Sub-Source</label>
                                    <lightning-input-field name="Walk_In_Sub_Source__c"
                                        field-name="Walk_In_Sub_Source__c" variant="label-hidden"
                                        class="slds-form-element__label" disabled={isSourceNotEditable}
                                        value={svWrapper.sv.Walk_In_Sub_Source__c} onchange={handleChange}
                                        style="width:100%;">
                                    </lightning-input-field>
                                </div>
                            </div>
                        </template>
                    </template>

                    <template if:false={showLeadDataFound}>
                        <template if:false={showOpportunityDataFound}>
                            <template if:true={showAccountDataFound}>
                                <div style="display: flex;">
                                    <div class="slds-p-around_medium user-input-box">
                                        <br />

                                        <label class="required-label">Walkin Source</label>
                                        <lightning-input-field name="Walk_In_Source__c" field-name="Walk_In_Source__c"
                                            variant="label-hidden" class="slds-form-element__label"
                                            disabled={isSourceNotEditable} value={svWrapper.sv.Walk_In_Source__c}
                                            onchange={handleChange} style="width:100%;">
                                        </lightning-input-field>

                                        <label class="required-label">Walkin Sub-Source</label>
                                        <lightning-input-field name="Walk_In_Sub_Source__c"
                                            field-name="Walk_In_Sub_Source__c" variant="label-hidden"
                                            disabled={isSourceNotEditable} class="slds-form-element__label"
                                            value={svWrapper.sv.Walk_In_Sub_Source__c} onchange={handleChange}
                                            style="width:100%;">
                                        </lightning-input-field>
                                    </div>
                                </div>
                            </template>
                        </template>
                    </template>

                    <template if:false={showLeadDataFound}>
                        <template if:false={showOpportunityDataFound}>
                            <template if:false={showAccountDataFound}>
                                <div style="display: flex;">
                                    <div class="slds-p-around_medium user-input-box">
                                        <br />

                                        <label class="required-label">Walkin Source</label>
                                        <lightning-input-field name="Walk_In_Source__c" field-name="Walk_In_Source__c"
                                            variant="label-hidden" class="slds-form-element__label"
                                            disabled={isSourceNotEditable} value={svWrapper.sv.Walk_In_Source__c}
                                            onchange={handleChange} style="width:100%;">
                                        </lightning-input-field>

                                        <label class="required-label">Walkin Sub-Source</label>
                                        <lightning-input-field name="Walk_In_Sub_Source__c"
                                            field-name="Walk_In_Sub_Source__c" variant="label-hidden"
                                            disabled={isSourceNotEditable} class="slds-form-element__label"
                                            value={svWrapper.sv.Walk_In_Sub_Source__c} onchange={handleChange}
                                            style="width:100%;">
                                        </lightning-input-field>
                                    </div>
                                </div>
                            </template>
                        </template>
                    </template>
                    <template if:true={showLeadDataFound}>
                        <template if:false={showOpportunityDataFound}>
                            <div style="display: flex;">
                                <div class="slds-p-around_medium user-input-box">
                                    <label class="slds-form-element__label">Lead Source </label>
                                    <lightning-input-field name="Lead_Source__c" field-name="Lead_Source__c"
                                        variant="label-hidden" class="slds-form-element__label"
                                        value={svWrapper.sv.Lead_Source__c} disabled={showLeadDataFound}
                                        onchange={handleChange}>
                                    </lightning-input-field>
                                </div>
                                <div class="slds-p-around_medium user-input-box">
                                    <label class="slds-form-element__label">Lead Sub-Source </label>
                                    <lightning-input-field name="Lead_Sub_source__c" field-name="Lead_Sub_source__c"
                                        variant="label-hidden" class="slds-form-element__label"
                                        value={svWrapper.sv.Lead_Sub_source__c} disabled={showLeadDataFound}
                                        onchange={handleChange}>
                                    </lightning-input-field>
                                </div>
                            </div>
                        </template>
                    </template>
                </lightning-record-edit-form>
                <template if:false={isSourceNotEditable}>
                    <template if:true={showChannelPartner}>
                        <div style="height:auto !important;">
                            <div class="slds-p-around_medium">
                                <label class="required-label" style="color:white; font-size:20px">Channel
                                Partner</label></br>
                                <c-custom-lookup-lwc icon-name="standard:account" s-object-api-name="Channel_Partner__c"
                                    data-name="Channel_Partner__c" project-id={projectId}
                                    default-record-id={svWrapper.sv.Channel_Partner__c} onlookupupdate={lookupRecord}
                                    variant="label-hidden" placeholder={searchPlaceholder} style="width:100%;">
                                </c-custom-lookup-lwc>
                            </div>
                            <template if:true={svWrapper.sv.CP_Project__c}>
                                <div class="slds-p-around_medium">
                                    <label class="required-label" style="color:white; font-size:20px">Sourcing Manager
                                </label>
                                    <c-custom-lookup-lwc icon-name="standard:user" s-object-api-name="user"
                                        data-name="User" project-id={projectId}
                                        default-record-id={svWrapper.sv.Sourcing_Manager__c}
                                        onlookupupdate={lookupRecord} variant="label-hidden"
                                        placeholder={searchPlaceholderSourcing} style="width:100%;">
                                    </c-custom-lookup-lwc>
                                </div>
                            </template>
                        </div>
                    </template>
                </template>

                <template if:false={showOpportunityDataFound}>
                    <template if:true={noCPFound}>
                        <lightning-record-edit-form object-api-name="Site_Visit__c">
                            <div class="slds-p-around_medium user-input-box">
                                <label> Is No CP Found</label>
                                <lightning-input-field name="Is_New_CP_Created__c" field-name="Is_New_CP_Created__c"
                                    variant="label-hidden" class="slds-form-element__label"
                                    value={svWrapper.sv.Is_New_CP_Created__c} onchange={handleChange}
                                    style="width:100%;">
                                </lightning-input-field>
                                <br /><br />

                                <template if:true={svWrapper.sv.Is_New_CP_Created__c}>
                                    <a onclick={handleNewChannelPartner}
                                        style="color: white; background-color: #219fde; padding: 10px 15px; border-radius: 5px; text-decoration: none; display: inline-block;">
                                        <u>Click here to create new CP</u>
                                    </a>
                                </template>

                            </div>
                        </lightning-record-edit-form>
                    </template>
                </template>
                <template if:true={isSourceNotEditable}>
                    <template if:true={svWrapper.sv.Channel_Partner__c}>
                        <div style="display: flex;">
                            <div class="slds-p-around_medium user-input-box">
                                <label>Channel Partner <span style="color: red;">*</span></label>
                                <lightning-input value={searchName} placeholder={searchPlaceholder}
                                    onchange={getChannelPartner} variant="label-hidden" disabled={isSourceNotEditable}>
                                </lightning-input>

                            </div>
                            <div class="slds-p-around_medium user-input-box">
                                <label>Sourcing Manager<span style="color: red;">*</span></label>
                                <lightning-input value={searchNameSourcing} variant="label-hidden"
                                    disabled={isSourceNotEditable}>
                                </lightning-input>
                            </div>
                        </div>
                    </template>
                </template>

                <template if:true={showReferenceName}>
                    <div class="slds-p-around_medium user-input-box">
                        <label class="required-label">Reference Name</label>
                        <lightning-input type="text" variant="label-hidden" disabled={isSourceNotEditable}
                            name="Referrer_Name__c"  field-name="Referrer_Name__c" value={svWrapper.sv.Referrer_Name__c} onchange={handleChange}
                            style="width:100%;">
                        </lightning-input>
                    </div>
                </template>


                <lightning-record-edit-form object-api-name="Site_Visit__c">
                    <template if:false={showOpportunityDataFound}>
                        <div class="slds-p-around_medium user-input-box">
                            <label class="slds-form-element__label">Is Source Conflict? </label>
                            <lightning-input-field name="Clash__c" field-name="Clash__c" variant="label-hidden"
                                class="slds-form-element__label" value={svWrapper.sv.Clash__c} onchange={handleChange}>
                            </lightning-input-field>

                            <template if:true={svWrapper.sv.Clash__c}>

                                <label class="required-label">Source Details</label>
                                <lightning-input-field name="Clash_Details__c" field-name="Clash_Details__c"
                                    variant="label-hidden" class="slds-form-element__label"
                                    value={svWrapper.sv.Clash_Details__c} onchange={handleChange}>
                                </lightning-input-field>
                            </template>
                        </div>
                    </template>
                </lightning-record-edit-form>

                <template if:true={isShowModal}>
                    <section role="dialog" tabindex="-1" aria-labelledby="modal-heading-01" aria-modal="true"
                        aria-describedby="modal-content-id-1" class="slds-modal slds-fade-in-open">
                        <div class="slds-modal__container">
                            <!-- modal header start -->
                            <header class="slds-modal__header">
                                <button class="slds-button slds-button_icon slds-modal__close slds-button_icon-inverse"
                                    title="Close" onclick={hideModalBox}>
                                    <lightning-icon icon-name="utility:close" alternative-text="close" variant="inverse"
                                        size="small">
                                    </lightning-icon>
                                    <span class="slds-assistive-text">Close</span>
                                </button>
                                <h2 id="modal-heading-01" class="slds-text-heading_medium slds-hyphenate">
                                    New Channel Partner</h2>
                            </header>

                            <!-- modal body start -->
                            <div class="slds-modal__content slds-p-around_medium">
                                <lightning-record-edit-form object-api-name="Channel_Partner__c">
                                    <div style="overflow:auto;" class="slds-p-around_medium user-input-box">
                                        <table class="Table1Css">
                                            <tr>
                                                <th style="padding:8px !important;">
                                                    CP Name <span style="color: red;">*</span>
                                                </th>
                                                <td colspan="3"  style="padding:8px !important;">
                                                    <lightning-input-field field-name="Name" variant="label-hidden"
                                                        value={cpWrapper.cp.Name} onchange={handleChannelPartnerInfo}>
                                                    </lightning-input-field>
                                                </td>
                                            </tr>

                                            <tr>
                                                <th style="padding:8px !important;">
                                                    Firm Type <span style="color: red;">*</span>
                                                </th>
                                                <td colspan="3"  style="padding:8px !important;">
                                                    <lightning-input-field field-name="CP_Firm_Type__c"
                                                        variant="label-hidden" value={cpWrapper.cp.CP_Firm_Type__c}
                                                        onchange={handleChannelPartnerInfo}>
                                                    </lightning-input-field>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th style="padding:8px !important;">
                                                    Mobile Number <span style="color: red;">*</span>
                                                </th>
                                                <td colspan="3" style="padding:8px !important;">
                                                    <lightning-input-field field-name="Mobile__c" variant="label-hidden"
                                                        value={cpWrapper.cp.Mobile__c}
                                                        onchange={handleChannelPartnerInfo}>
                                                    </lightning-input-field>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th style="padding:8px !important;">
                                                    RERA No
                                                </th>
                                                <td colspan="3" style="padding:8px !important;">
                                                    <lightning-input-field field-name="MahaRERA_Registration_No__c"
                                                        variant="label-hidden"
                                                        value={cpWrapper.cp.MahaRERA_Registration_No__c}
                                                        onchange={handleChannelPartnerInfo}>
                                                    </lightning-input-field>
                                                </td>
                                            </tr>
                                            <tr>
                                                <th style="padding:8px !important;">
                                                    PAN No
                                                </th>
                                                <td colspan="3" style="padding:8px !important;">
                                                    <lightning-input-field field-name="PAN_No__c" variant="label-hidden"
                                                        value={cpWrapper.cp.PAN_No__c}
                                                        onchange={handleChannelPartnerInfo}>
                                                    </lightning-input-field>
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </lightning-record-edit-form>
                                <div class="slds-align_absolute-center" style="margin: 20px !important;">
                                    <button title="Submit" onclick={handlecreateChannelPartner}
                                        class="cn slds-align_absolute-center height:40px; width: 170px;font-size:20px;">Save</button>
                                </div>
                            </div>
                        </div>
                    </section>

                    <div class="slds-backdrop slds-backdrop_open"></div>
                </template>

                <div class="button-container" style="margin: 20px !important;">
                    <button title="Previous" type="button" onclick={handlefourthPagePrevious} class="btn-2"
                        style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px; margin-right: 10px;">
                        Previous
                    </button>
                    <button title="Next" type="button" onclick={handleshowFourthPage} class="btn-2"
                        style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px;">
                        Next
                    </button>
                </div>

                <section if:true={showValidationPopup} aria-describedby="dialog-body-id-9"
                    aria-labelledby="dialog-heading-id-7" class="slds-popover slds-popover_error" role="dialog"
                    style="position:absolute;bottom:0px;left:50%;margin-left:0px;transform:translateX(-50%)">
                    <button
                        class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
                        title="Close dialog">
                        <lightning-icon icon-name="utility:close" alternative-text="CLose" size="xx-small"
                            title="large size" variant="inverse" class="slds-icon slds-icon_x-small" aria-hidden="true"
                            onclick={handleclosepopup}></lightning-icon>

                        <span class="slds-assistive-text">Close dialog</span>
                    </button>
                    <header class="slds-popover__header">
                        <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                            <div class="slds-media__figure">
                                <span class="slds-icon_container slds-icon-utility-error">
                                    <lightning-icon icon-name="utility:error" alternative-text="Error" size="xx-small"
                                        title="large size" variant="inverse" class="slds-icon slds-icon_x-small"
                                        aria-hidden="true"></lightning-icon>

                                </span>
                            </div>

                            <div class="slds-media__body" if:true={showValidationPopup}>
                                <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-7"
                                    title="Resolve error">Mandatory Fields</h2>
                            </div>

                        </div>
                    </header>

                    <div class="slds-popover__body" id="dialog-body-id-9">
                        <p if:true={showValidationPopup}> {showValidation}
                            <!-- <a href="#" title="Learn More">Learn More</a> -->
                        </p>
                    </div>
                </section>
            </div>
        </div>
    </template>
    <!-- end fourth page -->

    <!-- fifth page start -->
    <template if:true={showFifthpage}>
        <div class="body slds-align_absolute-center">
            <div class="container">
                <lightning-record-edit-form object-api-name="Site_Visit__c">
                    <div class="slds-align_absolute-center plogo">
                        <img style="max-height: 100px" alt="Company logo" src={excellerLogoUrl} />
                    </div>
                    <br />
                    <h1 class="form-title">Requirement Details</h1>

                    <div class="slds-p-around_medium user-input-box">
                        <label class="required-label"> Please state the configuration you are interested in?</label>
                        <lightning-input-field name="Configuration_Required__c" field-name="Configuration_Required__c"
                            variant="label-hidden" class="slds-form-element__label"
                            value={svWrapper.sv.Configuration_Required__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label class="required-label"> Please state the budget for purchasing a house? </label>
                        <lightning-input-field name="Budget__c" field-name="Budget__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Budget__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label class="required-label">What is the purpose of Purchase? </label>
                        <lightning-input-field name="Buying_Purpose__c" field-name="Buying_Purpose__c"
                            variant="label-hidden" class="slds-form-element__label"
                            value={svWrapper.sv.Buying_Purpose__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label class="required-label"> What is the range of Possession?</label>
                        <lightning-input-field name="Possession_Timeframe_Required__c"
                            field-name="Possession_Timeframe_Required__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Possession_Timeframe_Required__c}
                            onchange={handleChange}>
                        </lightning-input-field>

                        <label class="required-label"> Please Select Current Residence Status? </label>
                        <lightning-input-field name="Current_Residence_Status__c"
                            field-name="Current_Residence_Status__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Current_Residence_Status__c}
                            onchange={handleChange}>
                        </lightning-input-field>

                        <label class="required-label"> What is the Actual Budget Range? </label>
                        <lightning-input-field name="Actual_Budget__c" field-name="Actual_Budget__c"
                            variant="label-hidden" class="slds-form-element__label"
                            value={svWrapper.sv.Actual_Budget__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label class="required-label"> Please enter Preferred Location? </label>
                        <lightning-input-field name="Preferred_Location__c" field-name="Preferred_Location__c"
                            variant="label-hidden" class="slds-form-element__label"
                            value={svWrapper.sv.Preferred_Location__c} onchange={handleChange}>
                        </lightning-input-field>
                    </div>
                </lightning-record-edit-form>

                <div class="button-container" style="margin: 20px !important;">
                    <button title="Previous" type="button" onclick={handlefifthPrevious} class="btn-2"
                        style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px; margin-right: 10px;">
                        Previous
                    </button>
                    <button title="Next" type="button" onclick={handlefifthpage} class="btn-2"
                        style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px;">
                        Next
                    </button>
                </div>

                <section if:true={showValidationPopup} aria-describedby="dialog-body-id-10"
                    aria-labelledby="dialog-heading-id-8" class="slds-popover slds-popover_error" role="dialog"
                    style="position:absolute;bottom:0px;left:50%;margin-left:0px;transform:translateX(-50%)">
                    <button
                        class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
                        title="Close dialog">
                        <lightning-icon icon-name="utility:close" alternative-text="CLose" size="xx-small"
                            title="large size" variant="inverse" class="slds-icon slds-icon_x-small" aria-hidden="true"
                            onclick={handleclosepopup}></lightning-icon>

                        <span class="slds-assistive-text">Close dialog</span>
                    </button>
                    <header class="slds-popover__header">
                        <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                            <div class="slds-media__figure">
                                <span class="slds-icon_container slds-icon-utility-error">
                                    <lightning-icon icon-name="utility:error" alternative-text="Error" size="xx-small"
                                        title="large size" variant="inverse" class="slds-icon slds-icon_x-small"
                                        aria-hidden="true"></lightning-icon>

                                </span>
                            </div>

                            <div class="slds-media__body" if:true={showValidationPopup}>
                                <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-8"
                                    title="Resolve error">Mandatory Fields</h2>
                            </div>

                        </div>
                    </header>

                    <div class="slds-popover__body" id="dialog-body-id-10">
                        <p if:true={showValidationPopup}> {showValidation}
                            <!-- <a href="#" title="Learn More">Learn More</a> -->
                        </p>
                    </div>
                </section>
            </div>
        </div>
    </template>
    <!-- fifth page end -->
    <!-- six page start -->
    <template if:true={showsixPage}>
        <div class="body slds-align_absolute-center">
            <div class="container">
                <lightning-record-edit-form object-api-name="Site_Visit__c">
                    <div class="slds-align_absolute-center plogo">
                        <img style="max-height: 100px" alt="Company logo" src={excellerLogoUrl} />
                    </div>
                    <br />
                    <h1 class="form-title">Demographic Details</h1>

                    <div class="slds-p-around_medium user-input-box">
                        <label>Ethnicity</label>
                        <lightning-input-field name="Ethnicity__c" field-name="Ethnicity__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Ethnicity__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label> Age Group </label>
                        <lightning-input-field name="Age_Group__c" field-name="Age_Group__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Age_Group__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label class="slds-form-element__label">Marital Status</label>
                        <lightning-input-field name="Marital_Status__c" field-name="Marital_Status__c"
                            variant="label-hidden" class="slds-form-element__label"
                            value={svWrapper.sv.Marital_Status__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label class="slds-form-element__label"> Family Size </label>
                        <lightning-input-field name="Family_Size__c" field-name="Family_Size__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Family_Size__c}
                            onchange={handleChange}>
                        </lightning-input-field>

                        <label class="slds-form-element__label"> Gender </label>
                        <lightning-input-field name="Gender__c" field-name="Gender__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Gender__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label class="required-label"> Company Name</label>
                        <lightning-input-field name="Company_Name__c" field-name="Company_Name__c"
                            variant="label-hidden" class="slds-form-element__label" value={svWrapper.sv.Company_Name__c}
                            onchange={handleChange}>
                        </lightning-input-field>

                        <label class="required-label"> Occupation</label>
                        <lightning-input-field name="Occupation__c" field-name="Occupation__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Occupation__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label> Industry</label>
                        <lightning-input-field name="Industry__c" field-name="Industry__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Industry__c} onchange={handleChange}>
                        </lightning-input-field>

                        <label> Designation </label>
                        <lightning-input-field name="Designation__c" field-name="Designation__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Designation__c}
                            onchange={handleChange}>
                        </lightning-input-field>
                        <label> Current Residence Configuration </label>
                        <lightning-input-field name="Current_Residence_Configuration__c"
                            field-name="Current_Residence_Configuration__c" variant="label-hidden"
                            class="slds-form-element__label" value={svWrapper.sv.Current_Residence_Configuration__c}
                            onchange={handleChange}>
                        </lightning-input-field>
                        <label> Source of Finance </label>
                        <lightning-input-field name="Source_of_Finance__c" field-name="Source_of_Finance__c"
                            variant="label-hidden" class="slds-form-element__label"
                            value={svWrapper.sv.Source_of_Finance__c} onchange={handleChange}>
                        </lightning-input-field>
                    </div>
                </lightning-record-edit-form>

                <div class="button-container" style="margin: 20px !important;">
                    <button title="Previous" type="button" onclick={handlesixprevious} class="btn-2"
                        style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px; margin-right: 10px;">
                        Previous
                    </button>
                    <button title="Next" type="button" onclick={handlesix} class="btn-2"
                        style="color: white; background-color: #219fde; height: 30px; width: 100px; font-size: 15px; border-radius: 5px;">
                        Save
                    </button>
                </div>

                <section if:true={showValidationPopup} aria-describedby="dialog-body-id-11"
                    aria-labelledby="dialog-heading-id-9" class="slds-popover slds-popover_error" role="dialog"
                    style="position:absolute;bottom:0px;left:50%;margin-left:0px;transform:translateX(-50%)">
                    <button
                        class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
                        title="Close dialog">
                        <lightning-icon icon-name="utility:close" alternative-text="CLose" size="xx-small"
                            title="large size" variant="inverse" class="slds-icon slds-icon_x-small" aria-hidden="true"
                            onclick={handleclosepopup}></lightning-icon>

                        <span class="slds-assistive-text">Close dialog</span>
                    </button>
                    <header class="slds-popover__header">
                        <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                            <div class="slds-media__figure">
                                <span class="slds-icon_container slds-icon-utility-error">
                                    <lightning-icon icon-name="utility:error" alternative-text="Error" size="xx-small"
                                        title="large size" variant="inverse" class="slds-icon slds-icon_x-small"
                                        aria-hidden="true"></lightning-icon>

                                </span>
                            </div>

                            <div class="slds-media__body" if:true={showValidationPopup}>
                                <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-9"
                                    title="Resolve error">Mandatory Fields</h2>
                            </div>

                        </div>
                    </header>

                    <div class="slds-popover__body" id="dialog-body-id-11">
                        <p if:true={showValidationPopup}> {showValidation}
                            <!-- <a href="#" title="Learn More">Learn More</a> -->
                        </p>
                    </div>
                </section>
            </div>
        </div>
    </template>
    <!-- six page end -->
    <!-- final screen Start -->
    <!-- Edited By Priyanshu Agarkar -->
    <template if:true={showFinalScreen}>
        <div class="body slds-align_absolute-center">
            <div class="container">
                <div class="slds-align_absolute-center plogo">
                    <img style="max-height: 100px" alt="Company logo" src={excellerLogoUrl} />
                </div>
                <br />
                <div style="text-align: center; width: 100%; margin-top: 20px;">
                    <p style="color: #e8e8e8; font-size: 18px; text-align: center;">
                        Thank you!! Your Site Visit No is
                        <b><u style="color:#e8e8e8; text-decoration:none;">&nbsp;{svName}&nbsp;</u></b>
                    </p>
                    <template if:true={showValidationPopup}>
                        <p style="color: red; font-size: 18px; text-align: center;">{showValidation}</p>
                    </template>
                    <div
                        style="display: flex; justify-content: center; align-items: center; gap: 20px; margin-top: -10px;">
                        <button title="GO TO SV"
                            style="height: 45px; width: 170px; font-size: 18px; padding: 5px; background-color:#219fde; color:#e8e8e8;"
                            onclick={handleviewRecord} class="btn">
                            Go To Site Visit
                        </button>
                        <button title="New Site Visit"
                            style="height: 45px; width: 170px; font-size: 18px; padding: 5px; background-color:#219fde; color:#e8e8e8;"
                            onclick={handleReset} class="btn">
                            New Site Visit
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </template>

    <!-- Error Popup Template -->
    <section if:true={showErrorPopup} aria-describedby="dialog-body-id-12" aria-labelledby="dialog-heading-id-10"
        class="slds-popover slds-popover_error" role="dialog"
        style="position:absolute;bottom:0px;left:50%;margin-left:0px;transform:translateX(-50%)">
        <button
            class="slds-button slds-button_icon slds-button_icon-small slds-float_right slds-popover__close slds-button_icon-inverse"
            title="Close dialog" onclick={handleCloseErrorPopup}>
            <lightning-icon icon-name="utility:close" alternative-text="Close" size="xx-small" title="large size"
                variant="inverse" class="slds-icon slds-icon_x-small" aria-hidden="true"></lightning-icon>
            <span class="slds-assistive-text">Close dialog</span>
        </button>
        <header class="slds-popover__header">
            <div class="slds-media slds-media_center slds-has-flexi-truncate ">
                <div class="slds-media__figure">
                    <span class="slds-icon_container slds-icon-utility-error">
                        <lightning-icon icon-name="utility:error" alternative-text="Error" size="xx-small"
                            title="large size" variant="inverse" class="slds-icon slds-icon_x-small"
                            aria-hidden="true"></lightning-icon>
                    </span>
                </div>

                <div class="slds-media__body">
                    <h2 class="slds-truncate slds-text-heading_medium" id="dialog-heading-id-10" title="Resolve error">
                        Error Occurred
                    </h2>
                </div>
            </div>
        </header>

        <div class="slds-popover__body" id="dialog-body-id-12">
            <p>{showValidation}</p>
        </div>
    </section>

    <!-- Edited By Priyanshu Agarkar -->
    <!-- final screen end  -->
</template>