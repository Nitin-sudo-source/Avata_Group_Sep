<!--
  @description       : 
  @author            : nitinSFDC@exceller.SFDoc
  @group             : 
  @last modified on  : 04-06-2025
  @last modified by  : nitinSFDC@exceller.SFDoc
-->
<template>
    <div class="form-container">
        <!-- Booking Summary Section -->
        <lightning-record-view-form record-id={recordId} object-api-name="Booking__c">
            <div class="section-header">
                <lightning-icon icon-name="utility:summary" size="small" class="header-icon"></lightning-icon>
                <h2>Booking Summary</h2>
            </div>
            <div class="section-content">
                <div class="info-grid">
                    <div class="info-item">
                        <label class="info-label">Project Name</label>
                        <div class="info-value">
                            <lightning-output-field field-name="Project__c" variant="label-hidden"></lightning-output-field>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Tower Name</label>
                        <div class="info-value">
                            <lightning-output-field field-name="Tower__c" variant="label-hidden"></lightning-output-field>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Opportunity Name</label>
                        <div class="info-value">
                            <lightning-output-field field-name="Opportunity__c" variant="label-hidden"></lightning-output-field>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Unit Name</label>
                        <div class="info-value">
                            <lightning-output-field field-name="Unit__c" variant="label-hidden"></lightning-output-field>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Booking Date</label>
                        <div class="info-value">
                            <lightning-output-field field-name="Booking_Date__c" variant="label-hidden"></lightning-output-field>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Total Amount Received</label>
                        <div class="info-value">
                            <lightning-output-field field-name="Total_Amount_Received__c" variant="label-hidden"></lightning-output-field>
                        </div>
                    </div>
                </div>
            </div>
        </lightning-record-view-form>

        <!-- Cancellation Form Section -->
        <lightning-record-edit-form record-id={recordId} object-api-name="Booking__c">
            <div class="section-header">
                <lightning-icon icon-name="utility:delete" size="small" class="header-icon"></lightning-icon>
                <h2>Cancellation Form</h2>
            </div>
            <div class="section-content">
                <div class="info-grid">
                    <div class="info-item">
                        <label class="info-label">Cancellation Type <span class="required">*</span></label>
                        <div class="info-value">
                            <lightning-input-field field-name="Cancellation_Type__c" variant="label-hidden" required onchange={handleCancelChange}></lightning-input-field>
                            <template if:true={showCancelError}>
                                <div class="error-message">Please select a cancellation type</div>
                            </template>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Refund Amount <span class="required">*</span></label>
                        <div class="info-value">
                            <lightning-input type="number" step="0.01" formatter="currency" placeholder="0.00"
                                value={amount} onchange={onchnageamount} variant="label-hidden"
                                data-formfield="Refund_Amount__c" required>
                            </lightning-input>
                            <template if:true={showAmountError}>
                                <div class="error-message">Please enter a valid amount</div>
                            </template>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Upload Document</label>
                        <div class="info-value">
                            <lightning-file-upload variant="label-hidden" accept={acceptedFormats} record-id={recordId}
                                onuploadfinished={handleUploadFinished}>
                            </lightning-file-upload>
                            <template if:true={showfilename}>
                                <p class="file-preview">{showfilename}</p>
                            </template>
                        </div>
                    </div>
                    <div class="info-item">
                        <label class="info-label">Remarks <span class="required">*</span></label>
                        <div class="info-value">
                            <lightning-textarea data-formfield="Cancellation_Remark__c"
                                placeholder="State reason for cancellation"
                                value={reason} onchange={handleReasonChange} variant="label-hidden" required>
                            </lightning-textarea>
                            <template if:true={showReasonError}>
                                <div class="error-message">Remarks are required</div>
                            </template>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-actions">
                <lightning-button variant="brand" label="Submit Cancellation" onclick={createBookData}></lightning-button>
            </div>
        </lightning-record-edit-form>
    </div>
</template>